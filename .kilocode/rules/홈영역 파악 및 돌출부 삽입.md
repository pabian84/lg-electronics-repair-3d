# 홈영역 파악 및 돌출부 삽입.md

##  ■■ Description ■■
- **'홈(Hole/Groove) 영역 파악 및 돌출부 삽입'** 작업은 디지털 트윈 및 가상 조립 매뉴얼 구현에서 매우 높은 정밀도를 요구하는 작업이다.
### 1. Bounding Box & Offset 기반 (가장 빠르고 경제적)
- **방식:** 홈(Hole) 노드의 Bounding Box를 구한 뒤, 그 중심점(Center)을 타겟 좌표로 설정한다.
- **삽입 로직:** 돌출부 노드의 중심을 홈의 중심에 일치시키되, 모델링 데이터의 오프셋을 고려하여 한쪽 축(예: Z축)으로 미세하게 조정한다.
- **추천 상황:** 홈의 형상이 단순(사각형, 원형)하고 조립 정밀도가 아주 엄격하지 않을 때 적합하다.
### 2. 더미 노드(Pivot/Socket) 활용 방식 (가장 안정적 - 강력 추천)
3D 모델링 단계(Blender, Max 등)에서 **홈의 정중앙에 'Socket' 역할을 하는 빈(Empty) 객체**를 미리 심어둔다.
- **방식:** 
	1. 홈 내부에 `socket_hole_01`이라는 이름의 더미 노드를 배치한다. 
	2. 2. 돌출부 끝단에는 `plug_pin_01`이라는 이름의 노드를 배치한다. 
	3. 3. 코드에서 두 노드의 **World Position과 Quaternion(회전값)** 을 일치시킨다.
- **추천 이유:** 셰이더나 기하학적 계산 없이도 완벽한 삽입 각도와 깊이를 보장합니다. 유지보수가 매우 쉽다.
### 3. OBB(Oriented Bounding Box) 기반 충돌 체크
객체가 기울어져 있을 때 일반적인 AABB(Axis-Aligned Bounding Box)는 오차가 발생한다. 이때는 회전된 박스 모델인 **OBB**를 사용해야 한다.
- **방식:** `three-mesh-bvh` 라이브러리를 사용하여 홈 내부의 빈 공간(Volume)을 계산하고, 돌출부의 메쉬가 해당 볼륨 안으로 진입했는지 체크한다.
- **추천 상황:** 사용자가 직접 마우스로 부품을 드래그해서 끼워 넣는 **인터랙티브 교육 콘텐츠**를 제작할 때 필수적이다.
